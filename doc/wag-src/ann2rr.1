.TH ANN2RR 1 "1 November 2002" "WFDB 10.3.0" "WFDB Applications Guide"
.SH NAME
ann2rr, rr2ann \- convert annotation files to interval lists and vice versa
.SH SYNOPSIS
\fBann2rr -r\fR \fIrecord\fR \fB-a\fR \fIannotator\fR [ \fIoptions\fR ... ]
.br
\fBrr2ann -r\fR \fIrecord\fR \fB-a\fR \fIannotator\fR [ \fIoptions\fR ... ]
.SH DESCRIPTION
These programs are typically used to obtain RR interval series from ECG
annotation files, or to create an annotation file from such a series, but
they have a wider range of uses.

.SS "ann2rr"
.PP
Use \fBann2rr\fR to extract a list of intervals, in text format, from an
annotation file.  By default, the intervals are listed in units of sample
intervals (use \fBsampfreq\fR(1) to determine the sampling frequency of the
input record if necessary).  Options for \fBann2rr\fR include:
.TP
\fB-c\fR
Print intervals between consecutive valid annotations only.  (See discussion
below).
.TP
\fB-f\fR \fItime\fR
Begin at the specified \fItime\fR.  By default, \fBann2rr\fR starts at the
beginning of the record.
.TP
\fB-h\fR
Print a usage summary.
.TP
\fB-p\fR \fItype\fR [ \fItype\fR ... ]
Print intervals between annotations of the specified \fItypes\fR only.
The \fItype\fR arguments should be annotation mnemonics (e.g., \fBN\fR),
as normally printed by \fBrdann\fR(1) in the third column.  More than one
\fB-p\fR option may be used in a single command, and each \fB-p\fR option may
have more than one \fItype\fR argument following it.  If \fItype\fR begins
with ``-'', however, it must immediately follow \fB-p\fR (standard annotation
mnemonics do not begin with ``-'', but modification labels in an annotation
file may define such mnemonics).
.TP
\fB-t\fR \fItime\fR
Stop at the specified \fItime\fR.
.TP
\fB-v\fR, \fB-vs\fR, \fB-vm\fR, \fB-vh\fR, \fB-V\fR, \fB-Vs\fR, \fB-Vm\fR, \fB-Vh\fR
Print the elapsed times from the beginning of the record to the annotations
that begin each interval, as sample number (using \fB-v\fR), or in seconds
(using \fB-vs\fR), minutes (using \fB-vm\fR), or hours (using \fB-vh\fR)
before each heart rate value.  The options \fB-V\fR, \fB-Vs\fR, \fB-Vm\fR, and
\fB-Vh\fR work in the same way, but the printed times are those for the
annotations that end the intervals.  Only one of these options can be used at
a time;  if none is chosen, only the RR intervals are printed, in units of
sample intervals.  When using \fB-vs\fR, \fB-vm\fR, \fB-vh\fR, \fB-Vs\fR,
\fB-Vm\fR, or \fB-Vh\fR, intervals are printed in units of seconds.
.TP
\fB-w\fR
Print the type (\fBN\fR, \fBV\fR, etc., as for \fB-p\fR above) of the
annotation that ends each interval, at the end of each line of output.
.PP
The \fB-c\fR option, used without the \fB-p\fR option, causes \fBann2rr\fR to
filter out intervals between beats that have intervening non-beat annotations,
such as rhythm or signal quality change annotations.  Used with the \fB-p\fR
option, the \fB-c\fR option causes \fBann2rr\fR to reject intervals between
annotations of the type(s) specified by \fB-p\fR if there are annotations of
any other types intervening;  thus, for example, the combination of \fB-c\fR
and \fB-p N\fR would yield only intervals between consecutive normal beats,
and intervals between pairs of normal beats surrounding an ectopic beat would
be discarded from the output.

.SS "rr2ann"
.PP
Use \fBrr2ann\fR to create an annotation file from the standard input,
which should usually be a list of intervals in the format produced by
\fBann2rr\fR.  (For exceptions, see \fB-T\fR, \fB-w\fR, and \fB-x\fR below.)
The first token on each line is taken as an interval, and (if the \fB-w\fR
option is present) the second token is taken as an annotation mnemonic;
anything else on the same line is ignored, as are empty lines, spaces and tabs
at the beginning of a line, non-numeric tokens and anything following
them on the same line, negative intervals, and zero intervals.  The
output consists of a binary annotation file (\fIrecord\fR.\fIannotator\fR),
and (if it does not exist already) a text header file (\fIrecord\fR.hea).
Options for \fBrr2ann\fR include:
.TP
\fB-F\fR \fIfrequency\fR
Assume the specified sampling \fIfrequency\fR.  This option has no effect unless
it is necessary for \fBrr2ann\fR to create a header file;  in this case, a sampling
frequency of 250 Hz is assumed if the \fB-F\fR option is omitted.
.TP
\fB-h\fR
Print a usage summary.
.TP
\fB-T\fR
Interpret the input as times of occurrence, rather than as intervals.
.TP
\fB-w\fR
Set each annotation type from the mnemonic (\fBN\fR, \fBV\fR, etc.) in the
second column of the input (in the format produced by \fBann2rr\fR using
its \fB-w\fR option).
.TP
\fB-x\fR \fIn\fR
Multiply input by \fIn\fR to obtain intervals (or, if \fB-T\fR is also used,
times of occurrence) in units of sample intervals).  Default: \fIn\fR = 1.
.PP
Note that \fBwrann\fR(1) also provides a way to generate an annotation file
from text.  Unlike that of \fBrr2ann\fR, \fBwrann\fR's input format permits
specifying annotation subtypes and other fields.
.SH ENVIRONMENT
.PP
It may be necessary to set and export the shell variable \fBWFDB\fR (see
\fBsetwfdb\fR(1)).
.SH FILES
.TP 22
\fIrecord\fR.hea
header file
.TP 22
\fIrecord\fR.\fIannotator\fR
annotation file
.SH SEE ALSO
\fBrdann\fR(1), \fBsampfreq\fR(1), \fBsetwfdb\fR(1), \fBwrann\fR(1)
.SH AUTHOR
George B. Moody (george@mit.edu)
.SH SOURCE
http://www.physionet.org/physiotools/wfdb/app/ann2rr.c
.br
http://www.physionet.org/physiotools/wfdb/app/rr2ann.c
